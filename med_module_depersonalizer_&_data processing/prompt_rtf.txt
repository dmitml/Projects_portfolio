prompt_template_rtf = """Извлеки из документа следующие данные (верни строго JSON и только JSON): 
ФИО, Пол пациента, Дата рождения, Возраст пациента на момент госпитализации, Адрес пациента, Номер СНИЛС, Номер полиса ОМС, Название больницы, 
Дата госпитализации, Дата выписки, Дата смерти.

ОБЩИЕ ПРАВИЛА:
1) Возвращай **только** JSON-объект — без пояснений, без текста, без дополнительных полей.
2) Если какое-то поле не найдено в документе — запиши значение: "не указано".
3) Ничего не придумывай. Берёшь данные только из текста документа. Цифры и даты не меняй местами.
4) Даты выводи в формате **DD.MM.YYYY**. Все числа (например СНИЛС, полис) выводи без пробелов и дефисов.
5) Десятичная часть — через точку (если встречается).
6) Пол определяй по явной пометке в документе (М/Ж). Если пол не указан явно — определи **по отчеству** (например: -ич- → мужской, -овна/-евна/-ична → женский). Если и это невозможно — "не указано".
7) Если в документе после ФИО (в том же абзаце или в строках ниже) указано «адрес», «проживает», «регистрация» — извлеки ближайший фрагмент, содержащий адрес.

ПРАВИЛА ДЛЯ ДАТ ГОСПИТАЛИЗАЦИИ/ВЫПИСКИ:
1. Собрать даты из блока, связанного с заголовком «Отделение неотложной кардиологии РСЦ» (или любого похожего заголовка с текстом "Отделение ... РСЦ"):
   - Ищи форматы диапазонов вида "с DD.MM.YYYY по DD.MM.YYYY" в самой строке заголовка.
   - Все найденные даты положи отдельными элементами в список D.
2. Собрать даты из блока "Период нахождения в стационаре, дневном стационаре":
   - Ищите форматы "с DD.MM.YYYY по DD.MM.YYYY" или отдельные даты и время в этом блоке.
   - Все найденные даты положи отдельными элементами в список F.
3. Объедини списки D и F в список G: G = D ∪ F (все уникальные даты, найденные в обоих группах). 
4. Нормализуй даты в формате DD.MM.YYYY, отсортируй по возрастанию список G и убери дубликаты.
5. Если список G пуст — записать для обоих полей "Дата госпитализации" и "Дата выписки": "не указано".
6. Для определения "Дата госпитализации" и "Дата выписки" использовать **только** даты из списка G:
   - Учти все даты, включая указанные в названиях отделений и блоках стационара.
   - Если в списке G есть даты из разных периодов — выбрать для "Даты госпитализации" **первую дату** среди всех возможных, даже если она не связана напрямую с основным периодом госпитализации.
   - Если в списке G есть даты из разных периодов — выбрать для "Даты выписки" **последнюю дату** среди всех возможных, даже если она не связана напрямую с основным периодом госпитализации.

ПРАВИЛА ДЛЯ НОМЕРОВ:
- **СНИЛС**: ищи шаблон, похожий на `XXX-XXX-XXX XX` или `XXX XXX XXX XX`. В ответе убирай дефисы/пробелы: `XXXXXXXXXXX`. Если не найден — "не указано".
- **Полис ОМС**: ищи строку, содержащую слово "Страховщик" или "полис". Если не найден — "не указано".

ДРУГИЕ ПРАВИЛА:
- Если в документе явно указана "Дата смерти" — верни её. Иначе — "не указано".
- "Название больницы" — бери полноценное название из верхней части документа, где указано "Наименование  медицинской организации".
- "Возраст пациента на момент госпитализации" — **только** если возраст явно указан в документе; не вычисляй возраст по дате рождения. Если явно не указан — "не указано".

ПРИМЕР ВЫВОДА (строго соблюдать формат):
{{
  "ФИО": "Ростова Наталья Ильинична",
  "Пол пациента": "женский",
  "Дата рождения": "25.12.1936",
  "Возраст пациента на момент госпитализации": "82",
  "Адрес": "обл. Воронежская г. Воронеж ул. Авиационная д. 35 к. кв. 120",
  "Номер СНИЛС": "11111111111",
  "Номер полиса ОМС": "1111111111111111",
  "Название больницы": "ГУЗ БСМП им. К.Ю. Вавилова",
  "Дата госпитализации": "01.10.2019",  
  "Дата выписки": "20.01.2020",  
  "Дата смерти": "не указано"
}}

Вот текст:
{text}
"""