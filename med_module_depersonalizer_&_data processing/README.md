# Деанонимизация эпикризов

## Содержание
1. [Описание проекта](#описание-проекта)
2. [Установка и запуск](#установка-и-запуск)
3. [Работа с приложением](#работа-с-приложением)
   - [Главная страница](#главная-страница)
   - [Загрузка файлов](#загрузка-файлов)
   - [Обработка данных](#обработка-данных)
   - [Экспорт результатов](#экспорт-результатов)
   - [Поиск по УИН](#поиск-по-уин)
4. [Важные замечания](#важные-замечания)

## Описание проекта

Приложение для деанонимизации данных из выписных эпикризов. Вся обработка выполняется на сервисе Yandex Cloud.

## Установка и запуск

1. Скачайте все файлы приложения в удобную директорию
2. Поместите в корневую папку проекта файл YANDEX_CLOUD_KEYS.env. Файл должен иметь вид:  
   FOLDER_ID=идентификатор сервисного аккаунта  
   API_KEY_YANDEX=API-ключ, привязанный к сервисному аккаунту.
3. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
4. Запустите приложение:
   ```bash
   python app.py
   ```
5. Откройте в браузере: `http://localhost:5000`

## Работа с приложением

### Главная страница
Интерфейс включает четыре основные кнопки:
- Загрузка файлов
- Обработка
- Экспорт
- Поиск по УИН

### Загрузка файлов
- Поддерживаемые форматы: PDF, RTF, TXT
- Файлы загружаются во временную папку

### Обработка данных
1. Заполните поле "Регион"
2. Нажмите "Начать обработку"
3. Система автоматически пропускает дубликаты (опционально - можно отключить)
4. Каждый документ обрабатывается до 3 раз при ошибках
5. Результаты:
   - Очищенные документы → временная папка
   - Данные → локальная база
   - Ошибки валидации → папка errors

### Экспорт результатов
- Выгрузка данных в Excel
- Скачивание очищенных документов в ZIP-архиве
- Внимание: скачивание очищает временную папку

### Поиск по УИН
- Ввод УИН пациента в соответствующее поле
- Отображение всей информации в формате JSON
- Данные берутся из локальной базы

## Важные замечания

1. **Производительность**: Скорость обработки зависит от размера документов
2. **Ошибки обработки**: Проблемные файлы сохраняются в папке errors с детализацией ошибок


